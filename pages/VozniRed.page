<apex:page controller="VozniRedController" docType="html-5.0" sideBar="false" showHeader="false">
    <head>

        <apex:includeScript value="{!$Resource.jquery321}"  />
        <apex:includeScript value="{!$Resource.momentMinJS2181}"/>
        <apex:includeScript value="{!URLFOR($Resource.aljs310, 'jquery.aljs-all.min.js')}"/>
        <title>eVlak - vozni red</title>

        <apex:stylesheet value="{!URLFOR($Resource.fa_470,'font-awesome-4.7.0/css/font-awesome.css')}"/>
        <!--apex:stylesheet value="{!URLFOR($Resource.slds232, '/assets/styles/salesforce-lightning-design-system.css')}"/-->
        <apex:slds />

        <style>
            article.slds-card#vozniRedCard {
                /*color: #000000; */
                /*background-color: #9ad3de;*/
                background: rgb(240,249,255); /* Old browsers */
                background: -moz-linear-gradient(top, rgba(240,249,255,1) 0%, rgba(240,249,255,1) 16%, rgba(203,235,255,1) 52%, rgba(161,219,255,1) 100%); /* FF3.6-15 */
                background: -webkit-linear-gradient(top, rgba(240,249,255,1) 0%,rgba(240,249,255,1) 16%,rgba(203,235,255,1) 52%,rgba(161,219,255,1) 100%); /* Chrome10-25,Safari5.1-6 */
                background: linear-gradient(to bottom, rgba(240,249,255,1) 0%,rgba(240,249,255,1) 16%,rgba(203,235,255,1) 52%,rgba(161,219,255,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f0f9ff', endColorstr='#a1dbff',GradientType=0 ); /* IE6-9 */
            }

            article.slds-card#vozniRedTabela {
                background: rgb(161,219,255); /* Old browsers */
background: -moz-linear-gradient(top, rgba(161,219,255,1) -1%, rgba(203,235,255,1) 42%, rgba(240,249,255,1) 86%, rgba(240,249,255,1) 100%); /* FF3.6-15 */
background: -webkit-linear-gradient(top, rgba(161,219,255,1) -1%,rgba(203,235,255,1) 42%,rgba(240,249,255,1) 86%,rgba(240,249,255,1) 100%); /* Chrome10-25,Safari5.1-6 */
background: linear-gradient(to bottom, rgba(161,219,255,1) -1%,rgba(203,235,255,1) 42%,rgba(240,249,255,1) 86%,rgba(240,249,255,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a1dbff', endColorstr='#f0f9ff',GradientType=0 ); /* IE6-9 */
            }

            .slds-icon-text-warning  {
                fill: #0099FF !important;
            }
            
        </style>

        <script>
            //moment().locale('de-de');

            $(document).ready(function() {
                $('.start-date').datepicker({
                    numYearsBefore: 0,
                    numYearsAfter: 1,
                    format: 'DD.MM.YYYY',
                    initDate: moment(),
                    todayLabel: 'Danes',
                    dayLabels: [
                        {
                            full: 'Nedelja',
                            abbr: 'Ned'
                        },
                        {
                            full: 'Ponedeljek',
                            abbr: 'Pon'
                        },
                        {
                            full: 'Torek',
                            abbr: 'Tor'
                        },
                        {
                            full: 'Sreda',
                            abbr: 'Sre'
                        },
                        {
                            full: 'Četrtek',
                            abbr: 'Čet'
                        },
                        {
                            full: 'Petek',
                            abbr: 'Pet'
                        },
                        {
                            full: 'Sobota',
                            abbr: 'Sob'
                        }
                    ],
                    monthLabels: [
                        {
                            full: 'Januar',
                            abbr: ''
                        },
                        {
                            full: 'Februar',
                            abbr: ''
                        },
                        {
                            full: 'Marec',
                            abbr: ''
                        },
                        {
                            full: 'April',
                            abbr: ''
                        },
                        {
                            full: 'Maj',
                            abbr: ''
                        },
                        {
                            full: 'Junij',
                            abbr: ''
                        },
                        {
                            full: 'Julij',
                            abbr: ''
                        },
                        {
                            full: 'Avgust',
                            abbr: ''
                        },
                        {
                            full: 'September',
                            abbr: ''
                        },
                        {
                            full: 'Oktober',
                            abbr: ''
                        },
                        {
                            full: 'November',
                            abbr: ''
                        },
                        {
                            full: 'December',
                            abbr: ''
                        }
                    ],
                    // onChange: function(currentSelection) {
                    //     debugger;
                    //     var momentDate = $('.start-date').datepicker('getDate');
                    //     console.log(currentSelection);
                    //     if(isAdd) {
                    //         $('.start-date').val(currentSelection);
                    //     } else {
                    //         $('.start-date').val('');
                    //     }
                    // },
                    onShow: function(datepicker) {
                        console.log('shown', datepicker);
                    },
                    onDismiss: function(datepicker) {
                        console.log('dismissed', datepicker);
                    },
                    onSelect: function(datepicker, selectedDate) {
                        console.log('selected', datepicker, selectedDate);
                    }
                });
            });


            var dataForLookup = JSON.parse('{!postajeJSON}');

            $(document).ready(function() {
                $('[data-aljs="popover"]').popover({
                    theme: 'info'
                });

                $('.postajaOdLookup').lookup({
                    items: dataForLookup,
                    //objectPluralLabel: 'Izberite vstopno postajo',
                    //objectLabel: 'Vstopna postaja',
                    useImgTag: false,
                    recentLabel: '',
                    searchDelay: 50,
                    objectIconUrl: '{!URLFOR($Asset.SLDS)}' + '/assets/icons/custom-sprite/svg/symbols.svg#custom96',
                    objectIconClass: 'slds-icon-custom-custom63',
                    onChange: function(currentSelection, isAdd) {
                        debugger;
                        if(isAdd) {
                            $('.postajaOdLookup').val(currentSelection.id);
                        } else {
                            $('.postajaOdLookup').val('');
                        }
                    }
                });

                $('.postajaDoLookup').lookup({
                    items: dataForLookup,
                    //objectPluralLabel: 'Izberite izstopno postajo',
                    objectLabel: 'Izstopna postaja',
                    useImgTag: false,
                    recentLabel: '',
                    searchDelay: 50,
                    objectIconUrl: '{!URLFOR($Asset.SLDS)}' + '/assets/icons/custom-sprite/svg/symbols.svg#custom96',
                    objectIconClass: 'slds-icon-custom-custom61',
                    onChange: function(currentSelection, isAdd) {
                        debugger;
                        if(isAdd) {
                            $('.postajaDoLookup').val(currentSelection.id);
                        } else {
                            $('.postajaDoLookup').val('');
                        }
                    }
                });

                $('.postajaOdLookup').val(''); // prevent wrong value if user go back from another page
                $('.postajaDoLookup').val('');
            });

            var assetsLocation = '{!URLFOR($Asset.SLDS)}';

            $.aljsInit({ // Below are the new defaults
                assetsLocation: assetsLocation,
                scoped: true,
                scopingClass: 'tilgo'
            });


            function switchStations() {
                var postOd = $('.postajaOdLookup').lookup('getSelection');
                var postDo = $('.postajaDoLookup').lookup('getSelection');
                if(postOd == null && postDo == null) {
                    return;
                } else if(postOd == null) {
                    $('.postajaDoLookup').lookup('setSelection', {label: "", id: ""});
                    $('.postajaOdLookup').lookup('setSelection', postDo);
                } else if(postDo == null) {
                    $('.postajaDoLookup').lookup('setSelection', postOd);
                    $('.postajaOdLookup').lookup('setSelection', {label: "", id: ""});
                } else {
                    $('.postajaOdLookup').lookup('setSelection', postDo);
                    $('.postajaDoLookup').lookup('setSelection', postOd);
                }
                debugger;
                setSearchToFalse();
            }


        </script>
    </head>

    <body>
        <div class="tilgo">
            <div class="slds-grid slds-wrap">
            <div class="slds-size_1-of-12"/>
            <div class="slds-size_10-of-12" style="margin-top: 5px;">
                <apex:form >

                    <apex:actionFunction action="{!setSearchToFalse}" name="setSearchToFalse" oncomplete="return false;" status="status" rerender="vozni-red, map-iframe, error-toast"/>

                    <c:globalNavigationComponent imeStrani="timeTableTab"/>

                    <apex:outputPanel id="error-toast">
                    <apex:outputPanel rendered="{!isError}">
                        <div class="slds-notify_container">
                            <div class="slds-notify slds-notify_toast slds-theme_info" role="alert">
                                <span class="slds-assistive-text">Napaka</span>
                                <span class="slds-icon_container slds-icon-utility-info slds-m-right_small slds-no-flex slds-align-top" title="Napaka">
                                    <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#warning')}"></use>
                                    </svg>
                                </span>
                                <div class="slds-notify__content">
                                    <h2 class="slds-text-heading_small">Napaka:</h2>
                                    <p>{!errorMsg}</p>
                                </div>
                                <!-- <apex:commandButton styleClass="slds-button slds-button_icon slds-notify__close slds-button_icon-inverse" title="Close">
                                    <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                    </svg>
                                    <span class="slds-assistive-text">Close</span>
                                </apex:commandButton>
 -->                          <apex:commandLink onclick="$(this).attr('disabled',true);" action="{!resetError}" styleClass="slds-button slds-button_icon slds-notify__close slds-button_icon-inverse" immediate="true" rerender="error-toast">
                                    <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/action-sprite/svg/symbols.svg#close')}"></use>
                                    </svg>
                                    <span class="slds-assistive-text">Close</span>
                              </apex:commandLink>
                            </div>
                        </div>
                    </apex:outputPanel>
                    </apex:outputPanel>


                    <!-- <div class="slds-grid slds-wrap" style="margin-top: 5px;">
                        <div class="slds-size_1-of-4"/>
                        <div class="slds-size_2-of-4">
                            <c:carouselComponent/>
                        </div>
                        <div class="slds-size_1-of-4"/>
                    </div> -->

                    <!-- <article class="slds-card" id="banner" style="margin-top: 5px; height: 250px;">
                        <div class="slds-card__body">
                        </div>
                    </article> -->


                    <article class="slds-card" style="margin-top: 5px;" id="vozniRedCard">

                      <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                          <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-forecasts" title="">
                              <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/standard-sprite/svg/symbols.svg#forecasts')}" />
                              </svg>
                            </span>
                          </div>
                          <div class="slds-media__body">
                            <h2>
                              <!-- <a href="javascript:void(0);" class="slds-card__header-link slds-truncate" title="[object Object]"> -->
                                <span class="slds-text-heading_small">Iskanje vozovnice</span>
                              <!-- </a> -->
                            </h2>
                          </div>
                        </header>
                        <div class="slds-no-flex">
                          <!-- <button class="slds-button slds-button_neutral">Osveži</button> -->
                        </div>
                      </div>
                      <div class="slds-card__body">
                          <div class="slds-grid slds-wrap" style="margin-top: 30px;">
                            <div class="slds-size_1-of-12"/>

                            <div class="slds-size_4-of-12">
                                <div class="slds-form-element slds-lookup" data-select="single" data-scope="single" style="margin-top: 10px;">
                                    <label class="slds-form-element__label" for="postajaOdLookup">Vstopna postaja</label>
                                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--right">
                                        <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink"  xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#upload')}"></use>
                                        </svg>
                                        <!-- <input id="postajaOdLookup" class="slds-lookup__search-input slds-input" type="text" aria-autocomplete="list" role="combobox" aria-expanded="false" aria-activedescendant="" placeholder="Vstopna postaja"/> -->
                                        <apex:inputText html-autocomplete="off" html-placeholder="Izberite vstopno postajo" id="postajaOdLookup" value="{!vstopnaValue}" styleClass="slds-lookup__search-input slds-input postajaOdLookup"/>
                                    </div>
                                </div>                        
                            </div>
                          
                            <div class="slds-size_1-of-12 slds-m-right_large slds-m-left_large slds-m-top_x-large">
                                <!-- <apex:commandButton styleClass="slds-button slds-button_neutral slds-align_absolute-center" onclick="switchStations();"  style="width: 70%;" oncomplete="return false;" value="Zamenjaj postaji">
                                </apex:commandButton> -->
                                <apex:commandLink styleClass="slds-button slds-button_neutral slds-align_absolute-center" onclick="switchStations();"  style="width: 90%; height: 100%;" oncomplete="return false;">
                                    <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#rotate')}" />
                                    </svg><div class="slds-truncate">&nbsp;</div>
                                </apex:commandLink>
                            </div>
                          
                            <div class="slds-size_4-of-12">

                                <div class="slds-form-element slds-lookup" data-select="single" data-scope="single" style="margin-top: 10px;">
                                    <label class="slds-form-element__label" for="postajaDoLookup">Izstopna postaja</label>
                                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--right">
                                        <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink"  xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#download')}"></use>
                                        </svg>
                                        <!-- <input id="postajaDoLookup" class="slds-lookup__search-input slds-input" type="text" role="combobox" aria-expanded="false" aria-activedescendant="" placeholder="Izstopna postaja"/> -->
                                        <apex:inputText html-placeholder="Izberite Izstopno postajo" id="postajaDoLookup" value="{!izstopnaValue}" styleClass="slds-lookup__search-input slds-input postajaDoLookup" html-autocomplete="off"/>
                                    </div>
                                </div>
                            </div>
                          
                            <!-- <div class="slds-size_1-of-12"/> -->

                            <div class="slds-size_1-of-12"/>

                            <div class="slds-size_1-of-12"/>

                            <div class="slds-size_2-of-12">
                                <div class="slds-form--stacked slds-float--left" style="margin-top: 10px;">
                                    <div class="slds-form-element">
                                        <label class="slds-form-element__label" for="date">Izberite datum</label>
                                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--right">
                                            <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default">
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink"  xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#event')}"></use>
                                            </svg>
                                            <!-- <input id="start-date" class="slds-input" type="text" placeholder="Izberite datum" label="Date Picker Label"/> -->
                                            <apex:inputText styleClass="slds-input start-date" value="{!startDate}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="slds-size_5-of-12">
                                <div class="slds-form-element  slds-m-left_x-large" style="margin-top: 30px;">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element">
                                            <label class="slds-checkbox">
                                                <apex:inputcheckbox id="povratnaVozovnicaCheckbox" styleclass="slds-input" value="{!povratnaVozovnicaCheckbox}" />
                                                <span class="slds-checkbox--faux"></span>
                                                <span class="slds-form-element__label">Povratna vozovnica?</span>
                                                <span class="slds-show--inline-block slds-p-around--x-small" tabindex="1" data-aljs="popover" data-aljs-placement="right" title="Povratne vozovnice veljajo: en dan za razdalje do 100 kilometrov ali petnajst dni za razdalje več kakor 100 kilometrov.">
                                                    <svg id="povratnaOpomba" aria-hidden="true" class="slds-input__icon slds-icon--x-small slds-icon-text-warning" html-disabled="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"  xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info_alt')}"></use>
                                                    </svg>
                                                </span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                    <!-- <div class="slds-form-element__control">
                                        <span class="slds-checkbox">
                                          <input type="checkbox" name="options" id="checkbox-22" value="on"/>
                                          <label class="slds-checkbox__label" for="checkbox-22">
                                            <span class="slds-checkbox_faux"></span>
                                            <span class="slds-form-element__label">
                                                
                                                <span class="slds-show--inline-block slds-p-around--x-small" tabindex="1" data-aljs="popover" data-aljs-placement="right" title="Povratne vozovnice veljajo: en dan za razdalje do 100 kilometrov ali
                                                petnajst dni za razdalje več kakor 100 kilometrov.">
                                                    <svg aria-hidden="true" class="slds-input__icon slds-icon--x-small slds-icon-text-warning" html-disabled="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"  xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info')}"></use>
                                                    </svg>
                                                </span>
                                            </span>
                                            
                                          </label>
                                        </span>
                                    </div>
                                </div> -->
                            </div>

                            <div class="slds-size_4-of-12"/>

                            <div class="slds-size_1-of-12"/>

                            <div class="slds-size_10-of-12">
                                <!-- <apex:commandButton styleClass="slds-button slds-button_neutral slds-align_absolute-center" action="{!getResults}" status="status" rerender="vozni-red, map-iframe, error-toast" style="margin-top: 30px; width: 70%;" oncomplete="return false;" value="Išči">
                                </apex:commandButton> -->
                                <apex:commandLink styleClass="slds-button slds-button_neutral slds-align_absolute-center" action="{!getResults}" status="status" rerender="vozni-red, map-iframe, error-toast" style="margin-top: 30px; width: 70%;" oncomplete="return false;">
                                    <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#search')}" />
                                    </svg>Poišči vozovnico
                                </apex:commandLink>
                            </div>

                                    
                          
                            <!-- <div class="slds-size_2-of-2">
                                <div class="slds-box slds-box_x-small slds-text-align_center slds-m-around_x-small">Vozni red</div>
                            </div> -->

                            

                          
                        </div>
                      </div>
                      <footer class="slds-card__footer"></footer>
                    </article>

                    <!-- zemljevid -->
                    <!-- <apex:outputPanel id="map-iframe">
                    <apex:outputPanel rendered="{!wVlakList != null && wVlakList.size > 0 && showMap && !isError}">
                        <article class="slds-card" id="banner" style="margin-top: 5px;">
                            <div class="slds-card__body">
                                <apex:iframe src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyCw5XvP6Zk-Ll6RSekKk2OYxaOBEjyntpk&origin=place_id:{!vstopnaApiPlaceId}&destination=place_id:{!izstopnaApiPlaceId}&avoid=tolls|highways&mode=transit"/>
                            </div>
                        </article>
                    </apex:outputPanel>
                    </apex:outputPanel> -->
                    <!-- /zemljevid -->

            <!-- VOZNI RED -->
                    <apex:outputPanel id="vozni-red">
                    <apex:outputPanel rendered="{!!isError && searchPressed}">
                        <article class="slds-card slds-m-bottom_medium" style="margin-top: 5px;" id="vozniRedTabela">
                          <div class="slds-card__header slds-grid slds-einstein-header">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                              <div class="slds-media__figure">
                                <span class="slds-icon_container slds-icon-standard-hierarchy" title="">
                                  <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/standard-sprite/svg/symbols.svg#product')}" />
                                  </svg>
                                </span>
                              </div>
                              <div class="slds-media__body">
                                <h2>
                                  <!-- <a href="javascript:void(0);" class="slds-card__header-link slds-truncate" title="[object Object]"> -->
                                    <span class="slds-text-heading_small">Vozni red in nakup vozovnice</span>
                                  <!-- </a> -->
                                </h2>
                              </div>
                            </header>
                            <div class="slds-no-flex">
                              <apex:commandButton styleClass="slds-button slds-button_neutral" action="{!toggleMap}" rerender="map-iframe, vozni-red" status="status" value="{!IF(showMap, 'Skrij zemljevid', 'Prikaži na zemljevidu')}"></apex:commandButton>
                            </div>
                          </div>
                          <div class="slds-card__body">
                            <apex:outputPanel rendered="{!wVlakList != null && wVlakList.size > 0}">
                              <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                  <thead>
                                    <tr class="slds-text-title_caps">
                                      <th scope="col">
                                        <div class="slds-truncate" title="Številka vlaka">Vlak</div>
                                      </th>
                                      <th scope="col">
                                        <div class="slds-truncate" title="Vstopna postaja">Vstopna postaja</div>
                                      </th>
                                      <th scope="col">
                                        <div class="slds-truncate" title="Ura odhoda">Odhod</div>
                                      </th>
                                      <th scope="col">
                                        <div class="slds-truncate" title="Izstopna postaja">Izstopna postaja</div>
                                      </th>
                                      <th scope="col">
                                        <div class="slds-truncate" title="Ura prihoda">Prihod</div>
                                      </th>
                                      <!-- <th scope="col">
                                        <div class="slds-truncate" title="Stage">Čas</div>
                                      </th> -->
                                      <th scope="col">
                                        <div class="slds-truncate" title="Razdalja">Razdalja</div>
                                      </th>
                                      <th scope="col">
                                        <div class="slds-truncate" title="Cena standardne vozovnice">
                                            Cena <span class="slds-show--inline-block slds-p-around--x-small" tabindex="1" data-aljs="popover" data-aljs-placement="top" title="{!IF(povratnaVozovnicaCheckbox, 'Prikazana cena velja za standardno povratno vozovnico.', 'Prikazana cena velja za standardno nepovratno vozovnico.')}">
                                                    <svg aria-hidden="true" class="slds-input__icon slds-icon--x-small slds-icon-text-warning" html-disabled="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"  xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info_alt')}"></use>
                                                    </svg>
                                                </span>
                                        </div>
                                      </th>
                                      <th scope="col">
                                        <div class="slds-truncate" title=""></div>
                                      </th>

                                    </tr>
                                  </thead>
                                  <tbody>
                                    <apex:repeat value="{!wVlakList}" var="v">
                                        <tr>
                                            <td class="slds-truncate" >{!v.vlakName}</td>
                                            <td class="slds-truncate">{!v.vlakPostZacetna.postanekPostaja.postajaName}</td>
                                            <td class="slds-truncate">
                                                {!v.vlakPostZacetna.postanekCasString}
                                            </td>
                                            <td class="slds-truncate">{!v.vlakPostKoncna.postanekPostaja.postajaName}</td>
                                            <td class="slds-truncate">{!v.vlakPostKoncna.postanekCasString}</td>
                                            <!-- <td class="slds-truncate">Calculate time</td> -->
                                            <td class="slds-truncate">{!relacija.Razdalja__c} km</td>
                                            <td class="slds-truncate">{!IF(povratnaVozovnicaCheckbox, relacija.Cena_Povratne__c, relacija.Cena__c)} €</td>

                                            <apex:outputPanel rendered="{!!isMember}" layout="none">
                                                <td title="Nakup">
                                                    <div class="slds-truncate" title="Nakup">
                                                        <apex:commandButton value="Nakup" action="{!openLoginModal}" status="status" rerender="prijava-panel" styleClass="slds-button slds-button_neutral" oncomplete="return false;" style="width: 100%;"></apex:commandButton>
                                                    </div>
                                                </td>
                                            </apex:outputPanel>

                                            <apex:outputPanel rendered="{!isMember}" layout="none">
                                                <td title="Nakup">
                                                    <div class="slds-truncate" title="Nakup">
                                                        <a href="{!$Site.Prefix}/nakupVozovnice?rid={!relacija.Id}&s={!smerVoznjeProtiLj}&p={!povratnaVozovnicaCheckbox}&d={!stringDate}" role="menuitem" tabindex="-1" class="slds-button slds-button_neutral" style="width: 100%;">Nakup</a>
                                                    </div>
                                                </td>
                                        </apex:outputPanel>
                                        </tr>
                                    </apex:repeat>
                                    <!-- <tr>
                                      <th scope="row" data-label="Opportunity Name">
                                        <div class="slds-truncate" title="Cloudhub"><a href="javascript:void(0);">LP 1802</a></div>
                                      </th>
                                      <td data-label="Account Name">
                                        <div class="slds-truncate" title="Cloudhub">Borovnica</div>
                                      </td>
                                      <td data-label="Account Name">
                                        <div class="slds-truncate" title="Cloudhub">14.02</div>
                                      </td>
                                      <td data-label="Account Name">
                                        <div class="slds-truncate" title="Cloudhub">Ljubljana</div>
                                      </td>
                                      <td data-label="Close Date">
                                        <div class="slds-truncate" title="4/14/2015">14.22</div>
                                      </td>
                                      <td data-label="Prospecting">
                                        <div class="slds-truncate" title="Prospecting">20 min</div>
                                      </td>
                                      <td data-label="Confidence">
                                        <div class="slds-truncate" title="20%">2.34 €</div>
                                      </td>
                                      <td data-label="Amount">
                                        <div class="slds-truncate" title="$25k">
                                            <button class="slds-button slds-button_brand" style="width: 100%;">Nakup</button>
                                        </div>
                                      </td>
                                    </tr>
                                    <tr>
                                      <th scope="row" data-label="Opportunity Name">
                                        <div class="slds-truncate" title="Cloudhub"><a href="javascript:void(0);">LP 1802</a></div>
                                      </th>
                                      <td data-label="Account Name">
                                        <div class="slds-truncate" title="Cloudhub">Borovnica</div>
                                      </td>
                                      <td data-label="Account Name">
                                        <div class="slds-truncate" title="Cloudhub">14.02</div>
                                      </td>
                                      <td data-label="Account Name">
                                        <div class="slds-truncate" title="Cloudhub">Ljubljana</div>
                                      </td>
                                      <td data-label="Close Date">
                                        <div class="slds-truncate" title="4/14/2015">14.22</div>
                                      </td>
                                      <td data-label="Prospecting">
                                        <div class="slds-truncate" title="Prospecting">20 min</div>
                                      </td>
                                      <td data-label="Confidence">
                                        <div class="slds-truncate" title="20%">2.34 €</div>
                                      </td>
                                      <td data-label="Amount">
                                        <div class="slds-truncate" title="$25k">
                                            <button class="slds-button slds-button_brand" style="width: 100%;">Nakup</button>
                                        </div>
                                      </td>
                                    </tr> -->
                                  </tbody>
                                </table>
                            </apex:outputPanel>

                            <apex:outputPanel rendered="{!wVlakList == null || wVlakList.size <= 0}" >
                                <span class="slds-icon_container slds-icon-utility-dislike slds-align_absolute-center" title="">
                                    <svg class="slds-icon slds-icon_large slds-icon-text-default" aria-hidden="true">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#remove_link')}" />
                                    </svg>
                                    <span class="slds-assistive-text">Description of icon when needed</span>
                                </span>
                                <br/>
                                <div class="slds-align_absolute-center">
                                    Hmmm... Izgleda, da na izbrani relaciji za izbrani datum, prevozi niso na voljo.
                                </div>
                                
                            </apex:outputPanel>
                          </div>
                          <footer class="slds-card__footer"></footer>
                        </article>

                        <script>
                            $('[data-aljs="popover"]').popover({
                                theme: 'info'
                            });
                        </script>
                    </apex:outputPanel>
                    </apex:outputPanel>


                    <!-- <div class="slds-page-header">
                        <div class="slds-media">
                            <div class="slds-media__figure">
                                <span class="slds-icon_container slds-icon-standard-opportunity" title="Description of icon when needed">
                                    <svg aria-hidden="true" class="slds-icon">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"  xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#case_milestone')}"></use>
                                    </svg>
                                </span>
                            </div>
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title slds-truncate slds-align-middle" title="Vozni red">Iskanje vozovnice</h1>
                            </div>
                        </div>
                    </div> -->

                    <!-- <apex:actionStatus id="status">
                        <apex:facet name="start">
                            <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.75; z-index: 1000; background-color: black;">
                                &nbsp;
                            </div>
                            <div style="position: fixed; left: 0; top: 0; bottom: 0; right: 0; z-index: 1001; margin: 30% 50%">
                                <img src="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#spinner')}" />
                                <!- - <i style="color: red" class="fa fa-user-circle fa-2x" aria-hidden="true"></i>   - ->
                            </div>
                            <script>debugger;</script>
                        </apex:facet>
                        <script>debugger;</script>
                    </apex:actionStatus> -->
                    <apex:outputPanel layout="none">
                        <apex:actionstatus id="status">
                           <apex:facet name="start">
                               <div class="slds-spinner_container" style="z-index: 9999; position: fixed;">
                                   <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                        <div class="slds-spinner__dot-a"></div>
                                        <div class="slds-spinner__dot-b"></div>
                                   </div>
                               </div>
                           </apex:facet>
                       </apex:actionstatus>
                   </apex:outputPanel>

                    <!-- Prijava Modal -->
                    <apex:outputPanel layout="none" id="prijava-panel">
                      <apex:outputPanel rendered="{!showLoginModal}">
                        <div id="prijava-modal">
                          <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container">
                              <div class="slds-modal__header">
                                <span class="slds-text-heading--medium">Prijava ali registracija</span>
                                  <apex:commandLink onclick="$(this).attr('disabled',true);" action="{!closeLoginModal}" styleClass="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" immediate="true" rerender="prijava-panel" status="status-confirmation-prijava">
                                      <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                         <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/action-sprite/svg/symbols.svg#close')}"></use>
                                      </svg>
                                      <span class="slds-assistive-text">Close</span>
                                      <!-- <apex:param value="" assignTo="{!selectedApprover}"/> -->
                                  </apex:commandLink>
                              </div>
                              <div class="slds-modal__content slds-p-around_medium slds-p-bottom_x-large slds-is-relative" style="min-height: 200px">
                                  <div id="alert-prijava" class="slds-notify slds-notify--alert slds-theme--error slds-theme--alert-texture slds-hide" role="alert" style="margin-bottom: 10px">
                                        <h2 id="errorMsgPrijava"></h2>
                                  </div>
                                  <div class="slds-form-element">
                                    Pred nakupom eVozovnice, se je potrebno prijaviti v svoj račun. Kliknite na gumb prijava. <br/><br/>Če računa še nimate, si ga ustvarite s klikom na gumb registracija.
                                    <!-- <div class="slds-form-element slds-lookup" id="prijavaSelection" data-select="single" data-scope="single">
                                      <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--right">
                                          <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default">
                                              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#search')}"></use>
                                          </svg>
                                          <!-- <apex:input html-data-gramm="false" value="{!selectedApprover}" html-autocomplete="off" id="changeApprover" styleClass="slds-input" type="text" onclick="changeApprover();"/> - ->
                                      </div>
                                    </div> -->
                                  </div>
                                  <br/>
                                  <apex:actionstatus id="status-confirmation-prijava">
                                        <apex:facet name="start">
                                            <div class="slds-spinner_container">
                                                <div role="status" class="slds-spinner--brand slds-spinner slds-spinner--medium">
                                                    <span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div>
                                                </div>
                                            </div>
                                        </apex:facet>
                                  </apex:actionstatus>
                              </div>
                              <footer class="slds-modal__footer slds-theme_default slds-modal__footer_directional">
                                    <apex:outputPanel layout="block" styleClass="slds-m-bottom_xx-small">
                                        <!-- <apex:commandButton value="OK" styleClass="slds-button slds-button_brand w100" rerender="changeApprover-panel" onclick="checkSelection();"> -->
                                        <!-- </apex:commandButton> -->
                                    </apex:outputPanel>
                                    <apex:outputPanel layout="block" styleClass="slds-m-bottom_xx-small">
                                        <!-- <apex:commandLink value="Cancel" action="{!closeLoginModal}" styleClass="slds-button slds-button_neutral" immediate="true" rerender="prijava-panel" status="status-confirmation-prijava">
                                        <!-- <apex:param value="" assignTo="{!selectedApprover}"/> - ->
                                        </apex:commandLink> -->

                                        <apex:commandLink action="{!closeLoginModal}" styleClass="slds-button slds-button_neutral" rerender="prijava-panel" status="status-confirmation-prijava">Cancel
                                        </apex:commandLink>

                                        <a class="slds-button slds-button_brand" href="/evlak/registracijaUporabnika">Registracija
                                        <!-- <apex:param value="" assignTo="{!selectedApprover}"/> -->
                                        </a>

                                        <a class="slds-button slds-button_brand" href="/evlak/prijavaUporabnika">Prijava
                                        <!-- <apex:param value="" assignTo="{!selectedApprover}"/> -->
                                        </a>
                                    </apex:outputPanel>
                                </footer>
                            </div>
                          </section>
                          <div class="slds-backdrop slds-backdrop_open"></div>
                        </div>
                      </apex:outputPanel>
                    </apex:outputPanel>
                    <!-- /Prijava Modal -->

                    <!-- Zemljevid Modal -->
                    <apex:outputPanel layout="none" id="map-iframe">
                      <apex:outputPanel rendered="{!searchPressed && showMap && !isError}">
                        <div id="zemljevid-modal">
                          <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                              <div class="slds-modal__header">
                                <!-- <span class="slds-text-heading--medium">Prijava ali registracija</span> -->
                                  <apex:commandLink onclick="$(this).attr('disabled',true);" action="{!toggleMap}" styleClass="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" immediate="true" rerender="map-iframe, vozni-red" status="status-confirmation-zemljevid">
                                      <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                         <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/action-sprite/svg/symbols.svg#close')}"></use>
                                      </svg>
                                      <span class="slds-assistive-text">Close</span>
                                      <!-- <apex:param value="" assignTo="{!selectedApprover}"/> -->
                                  </apex:commandLink>
                                  <!-- zemljevid -->
                                  <article class="slds-card" id="banner" style="margin-top: 5px;">
                                        <div class="slds-card__body">
                                            <apex:iframe src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyCw5XvP6Zk-Ll6RSekKk2OYxaOBEjyntpk&origin=place_id:{!vstopnaApiPlaceId}&destination=place_id:{!izstopnaApiPlaceId}&avoid=tolls|highways&mode=transit"/>
                                        </div>
                                   </article>
                                   <apex:actionstatus id="status-confirmation-zemljevid">
                                        <apex:facet name="start">
                                            <div class="slds-spinner_container">
                                                <div role="status" class="slds-spinner--brand slds-spinner slds-spinner--medium">
                                                    <span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div>
                                                </div>
                                            </div>
                                        </apex:facet>
                                  </apex:actionstatus>
                                    <!-- /zemljevid -->
                              </div>
<!--                               <div class="slds-modal__content slds-p-around_medium slds-p-bottom_x-large slds-is-relative" style="min-height: 200px">
                                  <div id="alert-zemljevid" class="slds-notify slds-notify--alert slds-theme--error slds-theme--alert-texture slds-hide" role="alert" style="margin-bottom: 10px">
                                        <h2 id="errorMsgPrijava"></h2>
                                  </div>
                                    

                                    <article class="slds-card" id="banner" style="margin-top: 5px;">
                                        <div class="slds-card__body">
                                            <apex:iframe src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyCw5XvP6Zk-Ll6RSekKk2OYxaOBEjyntpk&origin=place_id:{!vstopnaApiPlaceId}&destination=place_id:{!izstopnaApiPlaceId}&avoid=tolls|highways&mode=transit"/>
                                        </div>
                                    </article>

                                    
                                  <br/>
                                  <apex:actionstatus id="status-confirmation-prijava">
                                        <apex:facet name="start">
                                            <div class="slds-spinner_container">
                                                <div role="status" class="slds-spinner--brand slds-spinner slds-spinner--medium">
                                                    <span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div>
                                                </div>
                                            </div>
                                        </apex:facet>
                                  </apex:actionstatus>
                              </div> -->

                            </div>
                          </section>
                          <div class="slds-backdrop slds-backdrop_open"></div>
                        </div>
                      </apex:outputPanel>
                    </apex:outputPanel>
                    <!-- /Zemljevid Modal -->


           
                    <c:footerComponent />      
                </apex:form>
            </div>
            <div class="slds-size_1-of-12"/>
            </div>
        </div>
    </body>             
</apex:page>